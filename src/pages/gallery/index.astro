---
import GalleryGrid from '../../components/GalleryGrid.vue';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getAllGalleryImages } from '../../sanity/queries/gallery';
import { formatGalleryImages } from '../../utils/sanity';
import PageTitle from '../../components/shared/PageTitle.astro';
import GalleryNav from '../../components/gallery/GalleryNav.astro';

const rawImages = await getAllGalleryImages({ limit: 5, offset: 0 });
const initialImages = formatGalleryImages(rawImages); // âœ… shape them correctly
---

<BaseLayout>
  <PageTitle title="Photo Gallery" />
  <GalleryNav currentPath={Astro.url.pathname}  />

  <GalleryGrid client:load initialImages={initialImages} infinite={true} />
</BaseLayout>
``