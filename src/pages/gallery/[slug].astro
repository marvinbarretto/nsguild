---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { fetchGalleryList, fetchGalleryBySlug } from '../../utils/sanity';

const { slug } = Astro.params;

const galleries = await fetchGalleryList();
const gallery = await fetchGalleryBySlug(slug!);
---

<BaseLayout>
  <h1>Photo Gallery</h1>
  
  <!-- Left side: Navigation -->
  <nav>
    <ul>
      {galleries.map((g) => (
        <li>
          <a href={`/gallery/${g.slug}`}>{g.title}</a>
        </li>
      ))}
    </ul>
  </nav>

  <!-- Right side: Gallery images -->
  <section>
    {gallery ? (
      <>
        <h2>{gallery.title}</h2>
        <div>
          {gallery.images.map((img) => (
            <img src={img.url} alt="Gallery Image" />
          ))}
        </div>
      </>
    ) : (
      <p>No gallery found.</p>
    )}
  </section>
</BaseLayout>
