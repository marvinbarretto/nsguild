---
import Image from 'astro/components/Image.astro';

export interface Props {
  lightboxImage: string;
  thumbnail: string;
  altText?: string;
  caption?: string;
}

const { lightboxImage, thumbnail, altText = "Image", caption } = Astro.props;
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />

<a 
  href={lightboxImage} 
  class="glightbox"
  data-glightbox={caption ? `title: ${caption}` : undefined}
>
  <Image 
    src={thumbnail} 
    alt=""
    width={300} 
    height={200} 
    format="webp"
    quality={80}
    loading="lazy"
  />
</a>

<script>
  import GLightbox from 'glightbox';

  document.addEventListener('DOMContentLoaded', () => {
    GLightbox({
      touchNavigation: true,
      loop: true,
      zoomable: true,
      openEffect: 'zoom',
      closeEffect: 'fade',
    });
  });
</script>
